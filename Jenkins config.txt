sudo chown -R jenkins:www-data /var/www/
sudo chmod -R 775 /var/www/

sudo visudo
jenkins ALL=(ALL) NOPASSWD: /bin/systemctl local.jenkins.com.service
jenkins ALL=(ALL) NOPASSWD: /bin/rm -rf /var/www/testing
jenkins ALL=(ALL) NOPASSWD: /bin/rm, /bin/mkdir, /bin/cp, /bin/mv
jenkins ALL=(ALL) NOPASSWD: /bin/systemctl restart local.jenkins.com.service


------------Working job Jenkins-------------------
#!/bin/bash
set -e

# Шляхи
TEMP_DIR=/var/www/testing
DEPLOY_DIR=/var/www/local.jenkins.com

# 1. Видалимо стару тимчасову папку
sudo rm -rf $TEMP_DIR

# 2. Клонування репозиторію
git clone https://github.com/novakvova/JenkinsAzureP22 $TEMP_DIR

# 3. Публікація (Release збірка)
cd $TEMP_DIR
cd /var/www/testing/WebMVCJenkins/WebMVCJenkins/
dotnet publish -c Release -o $DEPLOY_DIR

# 4. Перезапуск служби
sudo systemctl restart local.jenkins.com.service


